<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="./css/Student_Registration.css" />
    <link rel="stylesheet" href="./css/global.css" />
    <title>Student Registeration</title>
  </head>

  <body>
    <div>
      <nav class="header">
        <h1>Hostel Management System</h1>
        <p>Enter your details to apply for hostel</p>
      </nav>
      <div id="multi-step-form-container">
        <!-- Form Steps / Progress Bar -->
        <ul
          class="form-stepper form-stepper-horizontal text-center mx-auto pl-0"
        >
          <li
            class="form-stepper-active text-center form-stepper-list"
            step="1"
          >
            <a class="mx-2" style="text-decoration: none">
              <span class="form-stepper-circle">
                <span>1</span>
              </span>
              <div class="label">General Details</div>
            </a>
          </li>
          <li
            class="form-stepper-unfinished text-center form-stepper-list"
            step="2"
          >
            <a class="mx-2" style="text-decoration: none">
              <span class="form-stepper-circle text-muted">
                <span>2</span>
              </span>
              <div class="label text-muted">Academic Details</div>
            </a>
          </li>
          <li
            class="form-stepper-unfinished text-center form-stepper-list"
            step="3"
          >
            <a class="mx-2" style="text-decoration: none">
              <span class="form-stepper-circle text-muted">
                <span>3</span>
              </span>
              <div class="label text-muted">Payment Details</div>
            </a>
          </li>
        </ul>
        <!-- Step Wise Form Content -->
        <form
          id="userAccountSetupForm"
          name="userAccountSetupForm"
          enctype="multipart/form-data"
          method="POST"
        >
          <!-- Step 1 Content -->
          <section id="step-1" class="form-step">
            <div class="mt-3">
              <div class="formbold-input-flex">
                <div>
                  <label for="prn" class="formbold-form-label"
                    >PRN<sup style="color: red; font-size: 12.5px">*</sup>
                  </label>
                  <input
                    type="text"
                    name="prn"
                    placeholder="Enter Your PRN"
                    id="prn"
                    class="formbold-form-input"
                    required
                  />
                </div>
                <div>
                  <label for="fullname" class="formbold-form-label"
                    >Fullname
                    <sup style="color: red; font-size: 12.5px">*</sup></label
                  >
                  <input
                    type="text"
                    name="fullname"
                    placeholder="Enter Your Fullname"
                    id="fullname"
                    class="formbold-form-input"
                    required
                  />
                </div>
              </div>
              <div class="formbold-input-flex">
                <div>
                  <label for="email" class="formbold-form-label"
                    >Email-ID<sup style="color: red; font-size: 12.5px"
                      >*</sup
                    ></label
                  >
                  <input
                    type="email"
                    name="email"
                    placeholder="Enter Your Email-ID"
                    id="email"
                    class="formbold-form-input"
                    required
                  />
                </div>
                <div>
                  <label for="DOB" class="formbold-form-label"
                    >Date of Birth<sup style="color: red; font-size: 12.5px"
                      >*</sup
                    ></label
                  >
                  <input
                    type="date"
                    name="DOB"
                    id="DOB"
                    class="formbold-form-input"
                    required
                  />
                </div>
              </div>
              <div class="formbold-input-flex">
                <div>
                  <label for="gender" class="formbold-form-label"
                    >Gender<sup style="color: red; font-size: 12.5px"
                      >*</sup
                    ></label
                  >
                  <select
                    name="gender"
                    id="gender"
                    class="formbold-form-input"
                    required
                  >
                    <option value="">Select Gender</option>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                  </select>
                </div>
                <div>
                  <label for="phone" class="formbold-form-label"
                    >Mobile No.<sup style="color: red; font-size: 12.5px"
                      >*</sup
                    ></label
                  >
                  <input
                    type="text"
                    name="phone"
                    id="phone"
                    class="formbold-form-input"
                    required
                  />
                </div>
              </div>
              <div class="formbold-input-flex">
                <div>
                  <label for="address1" class="formbold-form-label"
                    >Address Line 1<sup style="color: red; font-size: 12.5px"
                      >*</sup
                    ></label
                  >
                  <input
                    type="text"
                    name="address1"
                    placeholder="Enter Your Address"
                    id="address1"
                    class="formbold-form-input"
                    required
                  />
                </div>
                <div>
                  <label for="address2" class="formbold-form-label"
                    >Address Line 2</label
                  >
                  <input
                    type="text"
                    name="address2"
                    placeholder="Enter Your Address"
                    id="address2"
                    class="formbold-form-input"
                  />
                </div>
              </div>
              <div class="formbold-input-flex">
                <div>
                  <label for="city" class="formbold-form-label"
                    >City<sup style="color: red; font-size: 12.5px"
                      >*</sup
                    ></label
                  >
                  <input
                    type="text"
                    name="city"
                    id="city"
                    class="formbold-form-input"
                    required
                  />
                </div>
                <div>
                  <label for="state" class="formbold-form-label"
                    >State<sup style="color: red; font-size: 12.5px"
                      >*</sup
                    ></label
                  >
                  <input
                    type="text"
                    name="state"
                    id="state"
                    class="formbold-form-input"
                    required
                  />
                </div>
                <div>
                  <label for="Pincode" class="formbold-form-label"
                    >Pincode<sup style="color: red; font-size: 12.5px"
                      >*</sup
                    ></label
                  >
                  <input
                    type="text"
                    name="Pincode"
                    id="Pincode"
                    class="formbold-form-input"
                    required
                  />
                </div>
              </div>
              <h6>Parents' Mobile Number</h6>
              <div class="formbold-input-flex">
                <div>
                  <label for="fathermobile" class="formbold-form-label"
                    >Father<sup style="color: red; font-size: 12.5px"
                      >*</sup
                    ></label
                  >
                  <input
                    type="text"
                    name="fathermobile"
                    id="fathermobile"
                    class="formbold-form-input"
                    required
                  />
                </div>
                <div>
                  <label for="mothermobile" class="formbold-form-label"
                    >Mother<sup style="color: red; font-size: 12.5px"
                      >*</sup
                    ></label
                  >
                  <input
                    type="text"
                    name="mothermobile"
                    id="mothermobile"
                    class="formbold-form-input"
                    required
                  />
                </div>
                <div>
                  <label for="gaurdianmobile" class="formbold-form-label"
                    >Gaurdian</label
                  >
                  <input
                    type="text"
                    name="gaurdianmobile"
                    id="gaurdianmobile"
                    class="formbold-form-input"
                  />
                </div>
              </div>
              <div class="formbold-input-flex">
                <div>
                  <label for="BloodGroup" class="formbold-form-label"
                    >Blood Group<sup style="color: red; font-size: 12.5px"
                      >*</sup
                    ></label
                  >
                  <input
                    type="text"
                    name="BloodGroup"
                    id="BloodGroup"
                    class="formbold-form-input"
                    required
                  />
                </div>
                <div>
                  <label for="profilephoto" class="formbold-form-label"
                    >Profile Photo</label
                  >
                  <input
                    type="file"
                    name="profilephoto"
                    id="profilephoto"
                    class="formbold-form-input"
                  />
                </div>
              </div>
            </div>
            <div class="mt-3">
              <button
                class="button btn-navigate-form-step"
                type="button"
                step_number="2"
              >
                Next
              </button>
            </div>
          </section>
          <!-- Step 2 Content, default hidden on page load. -->
          <section id="step-2" class="form-step d-none">
            <!-- Step 2 input fields -->
            <div class="mt-3">
              <div class="formbold-input-flex">
                <div>
                  <label for="YOS" class="formbold-form-label"
                    >Year of Study<sup style="color: red; font-size: 12.5px"
                      >*</sup
                    ></label
                  >
                  <select name="YOS" id="YOS" class="formbold-form-input">
                    <option value="">Select Year</option>
                    <option value="1">First Year</option>
                    <option value="2">Second Year</option>
                    <option value="3">Third Year</option>
                    <option value="4">Final Year</option>
                  </select>
                </div>
                <div>
                  <label for="Branch" class="formbold-form-label"
                    >Branch<sup style="color: red; font-size: 12.5px"
                      >*</sup
                    ></label
                  >
                  <select name="Branch" id="Branch" class="formbold-form-input">
                    <option value="">Select Branch</option>
                    <option value="Computer Engineering">
                      Computer Engineering
                    </option>
                    <option value="Electrical Engineering">
                      Electrical Engineering
                    </option>
                    <option value="Mechanical Engineering">
                      Mechanical Engineering
                    </option>
                    <option value="Civil Engineering">Civil Engineering</option>
                  </select>
                </div>
              </div>
              <div class="formbold-input-flex">
                <div>
                  <label for="Section" class="formbold-form-label"
                    >Section</label
                  >
                  <select
                    name="Section"
                    id="Section"
                    class="formbold-form-input"
                  >
                    <option value="">Select Section</option>
                    <option value="A">A</option>
                    <option value="B">B</option>
                  </select>
                </div>
              </div>
            </div>
            <div class="mt-3">
              <button
                class="button btn-navigate-form-step"
                type="button"
                step_number="1"
              >
                Prev
              </button>
              <button
                class="button btn-navigate-form-step"
                type="button"
                step_number="3"
              >
                Next
              </button>
            </div>
          </section>
          <!-- Step 3 Content, default hidden on page load. -->
          <section id="step-3" class="form-step d-none">
            <!-- Step 3 input fields -->
            <div class="mt-3">
              <button
                class="button btn-navigate-form-step"
                type="button"
                step_number="2"
              >
                Prev
              </button>
              <button class="button submit-btn" type="submit">Save</button>
            </div>
          </section>
        </form>
      </div>
    </div>
  </body>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"
  ></script>

  <!-- <script>
    document.addEventListener("DOMContentLoaded", function () {
      // Function to check if all required fields in the current step are filled
      const checkFields = () => {
        const currentStep = document.querySelector(".form-step:not(.d-none)");
        const requiredInputs = currentStep.querySelectorAll(
          "input[required], select[required], textarea[required]"
        );
        let allFilled = true;

        requiredInputs.forEach((input) => {
          if (!input.value.trim()) {
            allFilled = false;
            input.classList.add("missing-field"); // Add class to highlight missing field
          } else {
            input.classList.remove("missing-field"); // Remove class if field is filled
          }
        });

        return allFilled;
      };

      // Function to enable or disable the Next button based on field completion
      const toggleNextButton = () => {
        const nextButton = document.querySelector(
          ".btn-navigate-form-step[step_number]"
        );
        if (checkFields()) {
          nextButton.removeAttribute("disabled");
        } else {
          nextButton.setAttribute("disabled", "true");
        }
      };

      // Initial toggle of the Next button
      toggleNextButton();

      // Add event listeners to required input fields to toggle Next button
      document
        .querySelectorAll(
          ".form-step input[required], .form-step select[required], .form-step textarea[required]"
        )
        .forEach((input) => {
          input.addEventListener("input", toggleNextButton);
        });
    });
  </script> -->

  <script>
    /**
     * Define a function to navigate betweens form steps.
     * It accepts one parameter. That is - step number.
     */
    const navigateToFormStep = (stepNumber) => {
      /**
       * Hide all form steps.
       */
      document.querySelectorAll(".form-step").forEach((formStepElement) => {
        formStepElement.classList.add("d-none");
      });
      /**
       * Mark all form steps as unfinished.
       */
      document
        .querySelectorAll(".form-stepper-list")
        .forEach((formStepHeader) => {
          formStepHeader.classList.add("form-stepper-unfinished");
          formStepHeader.classList.remove(
            "form-stepper-active",
            "form-stepper-completed"
          );
        });
      /**
       * Show the current form step (as passed to the function).
       */
      document.querySelector("#step-" + stepNumber).classList.remove("d-none");
      /**
       * Select the form step circle (progress bar).
       */
      const formStepCircle = document.querySelector(
        'li[step="' + stepNumber + '"]'
      );
      /**
       * Mark the current form step as active.
       */
      formStepCircle.classList.remove(
        "form-stepper-unfinished",
        "form-stepper-completed"
      );
      formStepCircle.classList.add("form-stepper-active");
      /**
       * Loop through each form step circles.
       * This loop will continue up to the current step number.
       * Example: If the current step is 3,
       * then the loop will perform operations for step 1 and 2.
       */
      for (let index = 0; index < stepNumber; index++) {
        /**
         * Select the form step circle (progress bar).
         */
        const formStepCircle = document.querySelector(
          'li[step="' + index + '"]'
        );
        /**
         * Check if the element exist. If yes, then proceed.
         */
        if (formStepCircle) {
          /**
           * Mark the form step as completed.
           */
          formStepCircle.classList.remove(
            "form-stepper-unfinished",
            "form-stepper-active"
          );
          formStepCircle.classList.add("form-stepper-completed");
        }
      }
    };
    /**
     * Select all form navigation buttons, and loop through them.
     */
    document
      .querySelectorAll(".btn-navigate-form-step")
      .forEach((formNavigationBtn) => {
        /**
         * Add a click event listener to the button.
         */
        formNavigationBtn.addEventListener("click", () => {
          /**
           * Get the value of the step.
           */
          const stepNumber = parseInt(
            formNavigationBtn.getAttribute("step_number")
          );
          /**
           * Call the function to navigate to the target form step.
           */
          navigateToFormStep(stepNumber);
        });
      });
  </script>

  <!-- ============================================================================== -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // Function to check if all required fields in the current step are filled
      const checkFields = () => {
        const currentStep = document.querySelector(".form-step:not(.d-none)");
        const requiredInputs = currentStep.querySelectorAll(
          "input[required], select[required], textarea[required]"
        );
        let allFilled = true;

        requiredInputs.forEach((input) => {
          if (!input.value.trim()) {
            allFilled = false;
            input.classList.add("missing-field"); // Add class to highlight missing field
          } else {
            input.classList.remove("missing-field"); // Remove class if field is filled
          }
        });

        return allFilled;
      };

      // Function to enable or disable the Next button based on field completion
      const toggleNextButton = () => {
        const nextButton = document.querySelector(
          ".btn-navigate-form-step[step_number]"
        );
        if (checkFields()) {
          nextButton.removeAttribute("disabled");
        } else {
          nextButton.setAttribute("disabled", "true");
        }
      };

      // Initial toggle of the Next button
      toggleNextButton();

      // Add event listeners to required input fields to toggle Next button
      document
        .querySelectorAll(
          ".form-step input[required], .form-step select[required], .form-step textarea[required]"
        )
        .forEach((input) => {
          input.addEventListener("input", toggleNextButton);
        });

      // Add event listener to the prn input field
      const prnInput = document.getElementById("prn");
      prnInput.addEventListener("input", function () {
        const prnValue = this.value.trim();
        if (prnValue !== "") {
          // Make AJAX request to fetch data from the server
          fetchDataFromServer(prnValue);
        }
      });
    });

    function fetchDataFromServer(prn) {
      $.ajax({
        url: "fetch_data.php",
        type: "GET",
        data: { prn: prn },
        dataType: "json",
        success: function (response) {
          if (response.hasOwnProperty("error")) {
            alert(response.error);
          } else {
            $("#fullname").val(response.fullname);
            $("#email").val(response.email);
            $("#DOB").val(response.DOB);
            $("#gender").val(response.gender);
            $("#phone").val(response.phone);
            $("#address1").val(response.address1);
            $("#address2").val(response.address2);
            $("#city").val(response.city);
            $("#state").val(response.state);
            $("#Pincode").val(response.Pincode);
            $("#fathermobile").val(response.fathermobile);
            $("#mothermobile").val(response.mothermobile);
            $("#gaurdianmobile").val(response.gaurdianmobile);
            $("#BloodGroup").val(response.BloodGroup);
            $("#Branch").val(response.course);
          }
        },
        error: function (xhr, status, error) {
          console.error(xhr.responseText);
        },
      });
    }
  </script>
</html>
<!-- Comment for update
 -->
